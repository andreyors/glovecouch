{% extends "layout/base.twig" %}

{% block title %}
My Workout
{% endblock %}

{% block content %}
<p></p>

<ol class="breadcrumb">
  <li><a href="/">Home</a></li>
  <li class="active">My Workout</li>
</ol>

<p></p>

<div class="row">
    <div class="col-xs-12">
        <div class="panel panel-default">
            <div class="panel-heading"><i class="fa fa-play"></i>&nbsp;Curl 3 x 10</div>
            <div class="panel-body" id="partial-progress">
                {% include 'partials/progress.twig' %}
            </div>
        </div>
    </div>
    
    <div class="clearfix"></div>
    
    <div class="col-xs-12 col-sm-6 col-lg-4">
        <div class="panel panel-default">
            <div class="panel-heading"><i class="fa fa-sort-amount-asc"></i>&nbsp;Next to do</div>
            <div class="panel-body">

                <ul class="tasks">
                    <li>Pulling 3 x 10 (superseries)</li>
                    <li>Pushups 4 x 8</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="col-xs-12 col-sm-6 col-lg-4">
        <div class="panel panel-default">
            <div class="panel-heading"><i class="fa fa-users"></i>&nbsp;Leaderboard</div>
            <div class="panel-body">
                <ol class="tasks">
                    <li>1. <a href="">Ironman</a></li>
                    <li>2. <a href="">Arnie The Governator</a></li>
                    <li>...</li>
                    <li>459. <strong>Conan The Barbarian (you)</strong></li>
                    <li>460. <a href="">Bob Square Muscules</a>
                </ol>
            </div>
        </div>
    </div>

    <div class="col-xs-12 col-sm-12 col-lg-4">
        <div class="panel panel-default">
            <div class="panel-heading"><i class="fa fa-tags"></i>&nbsp;Badges & Social</div>
            <div class="panel-body">
                <ul class="tasks">
                    <li>5d streak</li>
                    <li>Berliner Donat</li>
                    <li><strong>47</strong> persons likes you</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="clearfix"></div>
    
</div>

<script type="text/javascript" src="public/js/jquery.sparkline.min.js"></script>
<script type="text/javascript">
    function pollProgress() {
        console.log('here');
        jQuery.ajax({
            url: '/ajax/partial/progress',
            success: function(data) {
                jQuery('#partial-progress').html(data);
            }
        });
        setTimeout(pollProgress, 3000); // you could choose not to continue on failure...
    }

    jQuery(document).ready(function() {
        setTimeout(pollProgress, 3000);
    });
</script>
{% endblock %}